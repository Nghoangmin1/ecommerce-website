@model Fahasa.Models.Order
@{
    ViewData["Title"] = "Xác nhận đơn hàng";
}

<!-- Breadcrumb -->
<div class="bg-light py-3 mb-4 border-bottom">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb bg-transparent p-0 m-0">
                <li class="breadcrumb-item"><a asp-area="Customer" asp-controller="Home" asp-action="Index" class="text-dark">Trang chủ</a></li>
                <li class="breadcrumb-item active text-danger" aria-current="page">Xác nhận đơn hàng</li>
            </ol>
        </nav>
    </div>
</div>

<div class="container mb-5">
    <div class="text-center mb-5">
        <div class="mb-3">
            <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
        </div>
        <h2 class="font-weight-bold text-success mb-2">Đặt hàng thành công!</h2>
        <p class="lead text-muted">Cảm ơn bạn đã mua sắm tại Fahasa. Mã đơn hàng của bạn là <strong class="text-dark">#@Model.OrderNumber</strong></p>
        <div class="mt-3">
             <a asp-controller="Tracking" asp-action="Details" asp-route-id="@Model.Id" class="btn btn-outline-danger mr-2">Theo dõi đơn hàng</a>
             <a asp-controller="Home" asp-action="Index" class="btn btn-danger">Tiếp tục mua sắm</a>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Order Details Card -->
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-header bg-white font-weight-bold">Chi tiết đơn hàng</div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <h6 class="text-uppercase text-muted small font-weight-bold mb-3">Thông tin nhận hàng</h6>
                            <p class="mb-1"><strong class="mr-2">Người nhận:</strong> @Model.RecipientName</p>
                            <p class="mb-1"><strong class="mr-2">Điện thoại:</strong> @Model.Phone</p>
                            <p class="mb-1"><strong class="mr-2">Địa chỉ:</strong> @Model.AddressDetail, @Model.Ward, @Model.District, @Model.Province</p>
                            <p class="mb-0"><strong class="mr-2">Thanh toán:</strong> @Html.DisplayFor(m => m.PaymentMethod)</p>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-uppercase text-muted small font-weight-bold mb-3">Tóm tắt đơn hàng</h6>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between px-0 py-1 border-0">
                                    <span>Ngày đặt</span>
                                    <span>@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between px-0 py-1 border-0">
                                    <span>Tạm tính</span>
                                    <span>@Model.Subtotal.ToString("N0") đ</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between px-0 py-1 border-0">
                                    <span>Phí vận chuyển</span>
                                    <span>@Model.ShippingFee.ToString("N0") đ</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between px-0 py-2 border-top mt-2">
                                    <span class="font-weight-bold">Tổng cộng</span>
                                    <span class="text-danger font-weight-bold h5 mb-0">@Model.TotalAmount.ToString("N0") đ</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <h6 class="text-uppercase text-muted small font-weight-bold mb-3">Danh sách sản phẩm</h6>
                    <div class="table-responsive">
                        <table class="table table-bordered mb-0">
                            <thead class="bg-light">
                                <tr>
                                    <th>Sản phẩm</th>
                                    <th class="text-center" style="width: 100px;">Số lượng</th>
                                    <th class="text-right" style="width: 150px;">Thành tiền</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model.OrderItems != null)
                                {
                                    foreach (var item in Model.OrderItems)
                                    {
                                        <tr>
                                            <td>@item.ProductName</td>
                                            <td class="text-center">@item.Quantity</td>
                                            <td class="text-right">@item.TotalPrice.ToString("N0") đ</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="alert alert-info shadow-sm text-center">
                <i class="bi bi-info-circle-fill mr-2"></i> Mọi thắc mắc về đơn hàng vui lòng liên hệ hotline <strong>1900 636 467</strong> để được hỗ trợ.
            </div>
        </div>
    </div>
</div>